<?php 
	use Zend\Form\Element\Collection;
	use Contract\Form\Kontrak\HeaderFieldset;
	use Contract\Form\Kontrak\KomentarFieldset;
	use Contract\Form\Kontrak\PembuatanForm;
	use Zend\Form\Element\Select;
	use Zend\Form\Element\Text;
	use Zend\Form\Element\File;
	use Zend\Form\Element\Checkbox;
	
	$this->headTitle($this->pageTitle);
	
	/* @var $form Contract\Form\Kontrak\PembuatanForm */
	$form = $this->form;
	
	/* @var $tender Procurement\Entity\Tender\Tender */
	$tender = $this->tender;
	
	/* @var $kontrak Contract\Entity\Kontrak\Kontrak */
	$kontrak = $this->kontrak;
?>
<script type="text/javascript">
<!--
$(function(){
	$.datepicker.setDefaults($.datepicker.regional['in_ID']);
	$('.datepicker').datepicker();
	$('.datepicker').datepicker({
		changeYear: true,
		changeMonth: true,
		yearRange: '1999:2030',
		format: "dd-mm-yy"
	});
});
//-->
</script>
<div id="right">
	<?php 
		$form->prepare();
		echo $this->form()->openTag($form);
	?>
	<div class="section">
		<!-- Start Contract Header -->
		<div class="box">
			<div class="title">
				HEADER
				<span class="hide"></span>
			</div>
			<div class="content">
				<table class="form formStyle2">
					<tr>
						<td class="head" style="width: 200px;">Nomor Pengadaan</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Pengguna Barang / Jasa</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Vendor</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Tipe Kontrak</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Tanggal Penetapan Pemenang</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Jenis Kontrak</td>
						<td>
							<div>
								<!-- Select Jenis Kontrak, SPK atau Perjanjian -->
								<?php echo $this->formSelect($form->get(HeaderFieldset::DEFAULT_NAME)->get('jenisKontrak')) ?>
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;"><?php echo $form->get(HeaderFieldset::DEFAULT_NAME)->get('tanggalMulaiKontrak')->getOption('label')?></td>
						<td>
							<div>
								<!-- Datepicker tanggal mulai kontrak -->
								<?php echo $this->formInput($form->get(HeaderFieldset::DEFAULT_NAME)->get('tanggalMulaiKontrak'))?>
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;"><?php echo $form->get(HeaderFieldset::DEFAULT_NAME)->get('tanggalAkhirKontrak')->getOption('label')?></td>
						<td>
							<div>
								<!-- Datepicker tanggal berakhir kontrak -->
								<?php echo $this->formInput($form->get(HeaderFieldset::DEFAULT_NAME)->get('tanggalAkhirKontrak'))?>
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Nilai HPS</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Nilai Kontrak</td>
						<td>
							<div>
								
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Judul Pekerjaan</td>
						<td>
							<div>
								<!-- Textfield judul pekerjaan -->
							</div>
						</td>
					</tr>
					<tr>
						<td class="head" style="width: 200px;">Deskripsi Pekerjaan</td>
						<td>
							<div>
								<!-- Textarea deksripsi pekerjaan -->
							</div>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<!-- End Contract Header -->
		<!-- Start Contract Item -->
		<div class="box">
			<div class="title">
				ITEM
				<span class="hide"></span>
			</div>
			<div class="content">
				<table class="style1" id="contractItem">
					<thead>
						<tr>
							<th style="width: 50px;">No</th>
							<th style="width: 150px;">Kode Barang / Jasa</th>
							<th>Deskripsi</th>
							<th style="width: 200px;">Harga Satuan</th>
							<th style="width: 100px;">Satuan</th>
							<th style="width: 100px;">Jumlah</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- End Contract Item -->
		<!-- Start Contract Milestone -->
		<div class="box">
			<div class="title">
				MILESTONE
				<span class="hide"></span>
			</div>
			<div class="content">
				<div class="uibutton-toolbar">
					<button class="uibutton">Tambah Milestone</button>
				</div>
				<table class="style1" id="contractMilestone">
					<thead>
						<tr>
							<th style="width: 50px;">No</th>
							<th>Deskripsi</th>
							<th style="width: 200px;">Tanggal Target</th>
							<th style="width: 100px;">Bobot</th>
							<th style="width: 125px;"></th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td style="text-align: center;"></td>
							<td></td>
							<td></td>
							<td></td>
							<td style="text-align: center;"><input type="button" class="uibutton" value="Ubah" /><input type="button" class="uibutton" value="Hapus" /></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- End Contract Milestone -->
		<!-- Start Contract Lampiran -->
		<?php 
			/* @var $documentFieldsetCollection Collection */
			$documentFieldsetCollection = $form->get(PembuatanForm::DOKUMEN_FIELDSET_COLLECTION_NAME);
		?>
		<div class="box">
			<div class="title">
				LAMPIRAN
				<span class="hide"></span>
			</div>
			<div class="content">
				<table class="style1" id="contractAttachment">
					<thead>
						<tr>
							<th style="width: 50px;">No</th>
							<th style="width: 250px;">Kategori</th>
							<th style="width: 300px;">Deskripsi Lampiran</th>
							<th>File</th>
							<th style="width: 75px;">Kirim Ke Vendor</th>
						</tr>
					</thead>
					<tbody>
					<?php 
						/* @var $kodeKategoriSelect Select */
						$kodeKategoriSelect = $documentFieldsetCollection->getTargetElement()->get('kodeKategori');
						$kodeKategoriSelect->setName(sprintf('%s[][%s]', $documentFieldsetCollection->getName(), $kodeKategoriSelect->getName()));
					
						/* @var $keteranganText Text */
						$keteranganText = $documentFieldsetCollection->getTargetElement()->get('keterangan');
						$keteranganText->setName(sprintf('%s[][%s]', $documentFieldsetCollection->getName(), $keteranganText->getName()));
						
						/* @var $namaFile File */
						$namaFile = $documentFieldsetCollection->getTargetElement()->get('namaFile');
						$namaFile->setName(sprintf('%s[][%s]', $documentFieldsetCollection->getName(), $namaFile->getName()));
						
						/* @var $statusPublishCheckbox Checkbox */
						$statusPublishCheckbox = $documentFieldsetCollection->getTargetElement()->get('statusPublish');
						$statusPublishCheckbox->setName(sprintf('%s[][%s]', $documentFieldsetCollection->getName(), $statusPublishCheckbox->getName()));
						
						for ($index = 0; $index < $documentFieldsetCollection->getCount(); $index++) : 
					?>
						<tr>
							<td style="text-align: center;"><?php echo $index+1 ?></td>
							<?php 
							//$kodeKategoriSelect->setName(str_replace('index', $index, $kodeKategoriSelect->getName()));
							?>
							<td><?php echo $this->formSelect($kodeKategoriSelect)?></td>
							<?php 
							//$keteranganText->setName(str_replace('index', $index, $keteranganText->getName()));
							?>
							<td><?php echo $this->formText($keteranganText)?></td>
							<?php 
							//$namaFile->setName(str_replace('index', $index, $namaFile->getName()));
							?>
							<td><?php echo $this->formFile($namaFile)?></td>
							<?php 
							//$statusPublishCheckbox->setName(str_replace('index', $index, $statusPublishCheckbox->getName()));
							?>
							<td style="text-align: center;"><?php echo $this->formCheckbox($statusPublishCheckbox)?></td>
						</tr>
					<?php 
						endfor; 
					?>
					</tbody>
				</table>
			</div>
		</div>
		<!-- End Contract Lampiran -->
		
		<!-- Start Contract Comment -->
		<div class="box">
			<div class="title">
				KOMENTAR
				<span class="hide"></span>
			</div>
			<div class="content">
				<table class="form formStyle2">
					<tr>
						<td class="head" style="width: 200px;"><?php echo $form->get(KomentarFieldset::DEFAULT_NAME)->get('isi')->getOption('label')?></td>
						<td>
							<div>
								<!-- Textarea komentar -->
								<?php echo $this->formTextarea($form->get(KomentarFieldset::DEFAULT_NAME)->get('isi'))?>
							</div>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<!-- End Contract Comment -->
		
		<!-- Start Button Container -->
		<div class="box">
			<div class="uibutton-toolbar">
				<?php echo $this->formElement($form->get('submitDraft'))?>
				<?php echo $this->formElement($form->get('submit'))?>
				<a href="<?php echo $this->url('contract/todo')?>" class="uibutton">Kembali</a>
			</div>
		</div>
		<!-- End Button Container -->
	</div>
	<?php 
		echo $this->form()->closeTag();
	?>
</div>